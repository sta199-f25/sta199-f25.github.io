{
  "hash": "da158e1133ad08be2c2099feed736671",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"AE 01: Income inequality\"\nauthor: \"Mine Çetinkaya-Rundel\"\nformat: html\n---\n\n**Demo:** Replace \"Your Name\" above with your actual name.\nThen, render the document to inspect the changes.\nOnce you confirm you're happy with the changes, commit your changes (with an appropriate commit message) by staging **ALL** of the changed files, and push them to GitHub.\nIn your browser, navigate to your GitHub repository and confirm that the changes are reflected there.\n\nThe dataset we will explore is in the data folder and it's called `income-inequality.csv`.\nIt contains data on income inequality, measured by the GINI coefficient for different countries and years.\n\nFrom [Wikipedia](https://en.wikipedia.org/wiki/Gini_coefficient):\n\n> A Gini coefficient of 0 reflects perfect equality, where all income or wealth values are the same.\n> In contrast, a Gini coefficient of 1 (or 100%) reflects maximal inequality among values, where a single individual has all the income while all others have none.\n\nIn this dataset we have two Gini coefficients: one for income inequality before taxes and another for income inequality after taxes.\nThese two values allow us to explore how much countries redistribute income.\nIn addition, since we have data for multiple years, we can also explore how income inequality has changed over time.\n\n## Packages\n\nFor this application exercise, we'll use the **tidyverse** package.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4          ✔ readr     2.1.5     \n✔ forcats   1.0.0          ✔ stringr   1.5.1     \n✔ ggplot2   3.5.2          ✔ tibble    3.3.0.9000\n✔ lubridate 1.9.4          ✔ tidyr     1.3.1     \n✔ purrr     1.0.4          \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n:::\n\n\n**Demo:** Run the code cell above and inspect the message printed in the Console.\n\n## Data\n\nLet's load the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nincome_inequality <- read_csv(\"data/income-inequality.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 549 Columns: 5\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): country, country_code\ndbl (3): year, gini_pre_tax, gini_post_tax\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\nAnd take a look at the first 10 rows.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nincome_inequality\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 549 × 5\n   country   country_code  year gini_pre_tax gini_post_tax\n   <chr>     <chr>        <dbl>        <dbl>         <dbl>\n 1 Australia AUS           1989        0.431         0.304\n 2 Australia AUS           1995        0.47          0.311\n 3 Australia AUS           2001        0.481         0.32 \n 4 Australia AUS           2003        0.469         0.316\n 5 Australia AUS           2004        0.467         0.316\n 6 Australia AUS           2008        0.469         0.335\n 7 Australia AUS           2010        0.47          0.333\n 8 Australia AUS           2014        0.481         0.329\n 9 Australia AUS           2016        0.467         0.326\n10 Australia AUS           2018        0.469         0.329\n# ℹ 539 more rows\n```\n\n\n:::\n:::\n\n\nThe variables in the dataset are:\n\n-   `country`: Country name\n-   `country_code`: Country code\n-   `year`: Year\n-   `gini_pre_tax`: Gini coefficient before taxes\n-   `gini_post_tax`: Gini coefficient after taxes\n\n**Demo:** And take a look at the structure of the data as well with the `glimpse()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(income_inequality)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 549\nColumns: 5\n$ country       <chr> \"Australia\", \"Australia\", \"Australia\", \"Australia\", \"Aus…\n$ country_code  <chr> \"AUS\", \"AUS\", \"AUS\", \"AUS\", \"AUS\", \"AUS\", \"AUS\", \"AUS\", …\n$ year          <dbl> 1989, 1995, 2001, 2003, 2004, 2008, 2010, 2014, 2016, 20…\n$ gini_pre_tax  <dbl> 0.431, 0.470, 0.481, 0.469, 0.467, 0.469, 0.470, 0.481, …\n$ gini_post_tax <dbl> 0.304, 0.311, 0.320, 0.316, 0.316, 0.335, 0.333, 0.329, …\n```\n\n\n:::\n:::\n\n\n**Demo:** Render, commit (with an appropriate commit message), and push your changes to GitHub.\n\n**Your turn:** replace the blank below with the number of rows in the `income_inequality` data frame based on the output of the chunk below.\nThen, replace it with \"inline code\" and render again.\nThen, commit (with an appropriate commit message) and push your changes to GitHub.\n\nThe `income_inequality` data frame has 549 observations.\nEach observation represents a country in a given year.\n\n## Income inequality over time in a country\n\nLet's explore income inequality over time in a country.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nincome_inequality |>\n  filter(country == \"Denmark\") |>\n  pivot_longer(\n    cols = contains(\"gini\"),\n    names_to = \"gini_type\",\n    values_to = \"gini_coefficient\"\n  ) |>\n  mutate(\n    gini_type = if_else(gini_type == \"gini_pre_tax\", \"Pre-tax\", \"Post-tax\"),\n    gini_type = fct_relevel(gini_type, \"Pre-tax\", \"Post-tax\")\n  ) |>\n  ggplot(aes(x = year, y = gini_coefficient, color = gini_type)) +\n  geom_line(linewidth = 1)\n```\n\n::: {.cell-output-display}\n![](ae-01-income-inequality-A_files/figure-html/plot-single-1.png){width=768}\n:::\n:::\n\n\n**Your turn:** Create a similar plot for another country of your choice by by modifying the code in the code cell labeled `plot-single` above.\nThen, render, commit (with an appropriate commit message), and push your changes to GitHub.\n\n*Hint:* Open the data frame in the data viewer by clicking on its name in the Environment pane to see the list of countries.\n\n## Income inequality over time in many countries\n\nNow let's explore income inequality over time in many countries.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nincome_inequality |>\n  filter(country %in% c(\"United States\", \"Sweden\", \"South Africa\")) |>\n  pivot_longer(\n    cols = contains(\"gini\"),\n    names_to = \"gini_type\",\n    values_to = \"gini_coefficient\"\n  ) |>\n  mutate(\n    gini_type = if_else(gini_type == \"gini_pre_tax\", \"Pre-tax\", \"Post-tax\"),\n    gini_type = fct_relevel(gini_type, \"Pre-tax\", \"Post-tax\")\n  ) |>\n  ggplot(aes(x = year, y = gini_coefficient, color = gini_type)) +\n  geom_line(linewidth = 1) +\n  facet_wrap(~country, ncol = 1)\n```\n\n::: {.cell-output-display}\n![](ae-01-income-inequality-A_files/figure-html/plot-many-1.png){width=768}\n:::\n:::\n\n\n**Your turn:** Change as many countries as you like except for the United States by modifying the code in the cell labeled `plot-many` above.\nYou can replace country names like we did before or add or remove them.\nThen, render to see your changes.\nDiscuss your findings with your neighbor -- Why did you choose those countries?\nHow do the income inequalities of these countries compare?\nFinally, commit your changes (with an appropriate commit message), and push your changes to GitHub.\n",
    "supporting": [
      "ae-01-income-inequality-A_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}