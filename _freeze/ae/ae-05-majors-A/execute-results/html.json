{
  "hash": "598c813767a5249ddf05256b7ad6d8b6",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"AE 05: Tidying Stat Sci\"\nformat:\n  html:\n    self-contained: true\n---\n\n## Goal\n\nOur ultimate goal in this application exercise is to make the following data visualization.\n\n![](https://sta199-s24.github.io/images/statsci-plot.png){fig-alt=\"Line plot of numbers of Statistical Science majors over the years (2011 - 2021). Degree types represented are BS, BS2, AB, AB2. There is an increasing trend in BS degrees and somewhat steady trend in AB degrees.\" fig-align=\"center\"}\n\n## Data\n\nThe data come from the [Office of the University Registrar](https://registrar.duke.edu/registration/enrollment-statistics).\nThey make the data available as a table that you can download as a PDF, but I've put the data exported in a CSV file for you.\nLet's load that in.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nstatsci <- read_csv(\"data/statsci_clean.csv\")\n```\n:::\n\n\nAnd let's take a look at the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstatsci\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 16\n  degree_type `2011` `2012` `2013` `2014` `2015` `2016` `2017` `2018` `2019`\n  <chr>        <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>\n1 AB2              0      1      0      0      4      4      1      0      0\n2 AB               2      2      4      1      3      6      3      4      4\n3 BS2              2      6      1      0      5      6      6      8      8\n4 BS               5      9      4     13     10     17     24     21     26\n# ℹ 6 more variables: `2020` <dbl>, `2021` <dbl>, `2022` <dbl>, `2023` <dbl>,\n#   `2024` <dbl>, `2025` <dbl>\n```\n\n\n:::\n:::\n\n\n## Pivoting\n\n- **Demo:** Pivot the `statsci` data frame *longer* such that: \n\n  - Each row represents a degree type / year combination\n  - `year` and `n`umber of graduates for that year are columns in the data frame\n  - The resulting `year` column is numeric\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstatsci |>\n  pivot_longer(\n    cols = -degree_type,\n    names_to = \"year\",\n    values_to = \"n\",\n    names_transform = as.numeric\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 60 × 3\n   degree_type  year     n\n   <chr>       <dbl> <dbl>\n 1 AB2          2011     0\n 2 AB2          2012     1\n 3 AB2          2013     0\n 4 AB2          2014     0\n 5 AB2          2015     4\n 6 AB2          2016     4\n 7 AB2          2017     1\n 8 AB2          2018     0\n 9 AB2          2019     0\n10 AB2          2020     1\n# ℹ 50 more rows\n```\n\n\n:::\n:::\n\n\n\n\n-   **Your Turn:** Now, repeat your code from above, but this time **save the result** to a **new** variable name. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nstatsci_longer <- statsci |>\n  pivot_longer(\n    cols = -degree_type,\n    names_to = \"year\",\n    names_transform = as.numeric,\n    values_to = \"n\"\n  )\n```\n:::\n\n\n\n## Plotting\n\n-  **Your turn:** Now we will start making our plot, but let's not get too fancy right away. Create the following plot, which will serve as the \"first draft\" on the way to our [Goal]. Do this by adding on to your pipeline from earlier.\n\n![](https://sta199-s24.github.io/images/statsci-plot-draft.png){fig-alt=\"Line plot of numbers of Statistical Science majors over the years (2011 - 2021). Degree types represented are BS, BS2, AB, AB2. There is an increasing trend in BS degrees and somewhat steady trend in AB degrees.\" fig-align=\"center\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstatsci_longer |>\n  ggplot(aes(x = year, y = n, color = degree_type)) +\n  geom_point() +\n  geom_line()\n```\n\n::: {.cell-output-display}\n![](ae-05-majors-A_files/figure-html/plot-draft-1.png){width=672}\n:::\n:::\n\n\n- **Question**:  Why was the pivot necessary in order to create this plot?\n\n*Add your response here!*\n\n-   **Question:** What aspects of the plot need to be updated to go from the draft you created above to the [Goal] plot at the beginning of this application exercise.\n\n*Add your response here.*\n\n-   **Demo:** Update x-axis scale such that the years displayed go from 2011 to 2023 in increments of 2 years. Do this by adding on to your pipeline from earlier.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstatsci_longer |>\n  ggplot(aes(x = year, y = n, color = degree_type)) +\n  geom_point() +\n  geom_line() +\n  scale_x_continuous(breaks = seq(2011, 2025, 2))\n```\n\n::: {.cell-output-display}\n![](ae-05-majors-A_files/figure-html/plot-improve-1-1.png){width=672}\n:::\n:::\n\n\n-   **Demo:** Update line colors using the following level / color assignments. Once again, do this by adding on to your pipeline from earlier.\n    -   \"BS\" = \"cadetblue4\"\n\n    -   \"BS2\" = \"cadetblue3\"\n\n    -   \"AB\" = \"lightgoldenrod4\"\n\n    -   \"AB2\" = \"lightgoldenrod3\"\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstatsci_longer |>\n  ggplot(aes(x = year, y = n, color = degree_type)) +\n  geom_point() +\n  geom_line() +\n  scale_x_continuous(breaks = seq(2011, 2025, 2)) +\n  scale_color_manual(\n    values = c(\"BS\" = \"cadetblue4\", \n               \"BS2\" = \"cadetblue3\", \n               \"AB\" = \"lightgoldenrod4\", \n               \"AB2\" = \"lightgoldenrod3\"))\n```\n\n::: {.cell-output-display}\n![](ae-05-majors-A_files/figure-html/plot-improve-2-1.png){width=672}\n:::\n:::\n\n\n-   **Your turn:** Update the plot labels (`title`, `subtitle`, `x`, `y`, and `caption`) and use `theme_minimal()`. Once again, do this by adding on to your pipeline from earlier.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstatsci_longer |>\n  ggplot(aes(x = year, y = n, color = degree_type)) +\n  geom_point() +\n  geom_line() +\n  scale_x_continuous(breaks = seq(2011, 2025, 2)) +\n  scale_color_manual(\n    values = c(\"BS\" = \"cadetblue4\", \n               \"BS2\" = \"cadetblue3\", \n               \"AB\" = \"lightgoldenrod4\", \n               \"AB2\" = \"lightgoldenrod3\"))+\n  labs(\n    x = \"Graduation year\",\n    y = \"Number of majors graduating\",\n    color = \"Degree type\",\n    title = \"Statistical Science majors over the years\",\n    subtitle = \"Academic years 2011 - 2023\",\n    caption = \"Source: Office of the University Registrar\\nhttps://registrar.duke.edu/registration/enrollment-statistics\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](ae-05-majors-A_files/figure-html/plot-improve-3-1.png){width=672}\n:::\n:::\n\n\n-   **Demo:** Move the legend into the plot, make its background white, and its border gray. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nstatsci_longer |>\n  ggplot(aes(x = year, y = n, color = degree_type)) +\n  geom_point() +\n  geom_line() +\n  scale_x_continuous(breaks = seq(2011, 2025, 2)) +\n  scale_color_manual(\n    values = c(\"BS\" = \"cadetblue4\", \n               \"BS2\" = \"cadetblue3\", \n               \"AB\" = \"lightgoldenrod4\", \n               \"AB2\" = \"lightgoldenrod3\"))+\n  labs(\n    x = \"Graduation year\",\n    y = \"Number of majors graduating\",\n    color = \"Degree type\",\n    title = \"Statistical Science majors over the years\",\n    subtitle = \"Academic years 2011 - 2023\",\n    caption = \"Source: Office of the University Registrar\\nhttps://registrar.duke.edu/registration/enrollment-statistics\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"inside\",\n    legend.position.inside = c(0.1, 0.7),\n    legend.background = element_rect(fill = \"white\", color = \"hotpink\")\n  )\n```\n\n::: {.cell-output-display}\n![](ae-05-majors-A_files/figure-html/plot-improve-4-1.png){width=672}\n:::\n:::\n\n\n-   **Demo:** Finally, set `fig-width: 7` and `fig-height: 5` for your plot in the chunk options.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstatsci_longer |>\n  ggplot(aes(x = year, y = n, color = degree_type)) +\n  geom_point() +\n  geom_line() +\n  scale_x_continuous(breaks = seq(2011, 2025, 2)) +\n  scale_color_manual(\n    values = c(\"BS\" = \"cadetblue4\", \n               \"BS2\" = \"cadetblue3\", \n               \"AB\" = \"lightgoldenrod4\", \n               \"AB2\" = \"lightgoldenrod3\"))+\n  labs(\n    x = \"Graduation year\",\n    y = \"Number of majors graduating\",\n    color = \"Degree type\",\n    title = \"Statistical Science majors over the years\",\n    subtitle = \"Academic years 2011 - 2023\",\n    caption = \"Source: Office of the University Registrar\\nhttps://registrar.duke.edu/registration/enrollment-statistics\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"inside\",\n    legend.position.inside = c(0.1, 0.7),\n    legend.background = element_rect(fill = \"white\", color = \"grey\")\n  )\n```\n\n::: {.cell-output-display}\n![](ae-05-majors-A_files/figure-html/plot-improve-5-1.png){width=960}\n:::\n:::\n\n\n\n\n## Let's now pivot wider!\n\n-   **Demo**Just like you can pivot longer, you can pivot wider. Let's convert our longer data frame back into the  wider one in a single pipeline.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add your code here\n```\n:::\n\n",
    "supporting": [
      "ae-05-majors-A_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}