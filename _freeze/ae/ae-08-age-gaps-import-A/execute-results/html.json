{
  "hash": "90cf790d84b32a3dcf68dd14629a8b23",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"AE 08: Age gaps + import\"\nsubtitle: \"Suggested answers\"\ncategories: \n  - Application exercise\n  - Answers\n---\n\n::: callout-important\nThese are suggested answers.\nThis document should be used as a reference only; it's not designed to be an exhaustive key.\n:::\n\n## Packages\n\nWe will use the following two packages in this application exercise.\n\n-   **tidyverse**: For data import, wrangling, and visualization.\n-   **readxl:** For importing data from Excel.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\n```\n:::\n\n\n## Data\n\nThe data for this application exercise is from [Data is Plural](https://www.data-is-plural.com) and it is on age gaps in Hollywood relationships.\n\nThe data follows certain rules:\n\n- The two (or more) actors play actual love interests (not just friends, coworkers, or some other non-romantic type of relationship).\n- The youngest of the two actors is at least 17 years old.\n- Not animated characters.\n\nThe age gaps dataset includes \"gender\" columns, which always contain the values \"man\" or \"woman\". These values appear to indicate how the characters in each film identify. Some of these values do not match how the actor identifies.\n\nThe data are in an Excel file called `age-gaps.xlsx` in your `data` folder.\n\nThis is how the Excel file looks -- it has two sheets, one with the data (called `Hollywood Age Gaps`) and one with information about the data (called `Source`). Additionally, the data sheet has some metadata at the top, above the column headers.\n\n![](images/age-gaps-source.png){width=\"400\"}\n![](images/age-gaps-data.png){width=\"400\"}\n\n## Import\n\nLoad the data from `age-gaps.xlsx` in your `data` and assign it to `age_gaps`.\nConfirm that this new object appears in your Environment tab.\nClick on the *name of the object* in your Environment tab to pop open the data in the data viewer.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nage_gaps <- read_excel(\n  \"data/age-gaps.xlsx\",\n  sheet = \"Hollywood Age Gaps\",\n  skip = 2\n)\n```\n:::\n\n\n## Subset\n\nCreate a subset of the data frame for heterosexual relationships on screen.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nage_gaps_heterosexual <- age_gaps |>\n  filter(character_1_gender != character_2_gender)\n```\n:::\n\n\nSplit the data for heterosexual relationships into three -- where woman is older, where man is older, where they are the same age.\nSave these subsets as two appropriately named data frames.\n*Remember:* Use concise and evocative names.\nConfirm that these new objects appear in your Environment tab and that the sum of the number of observations in the two new data frames add to the number of observations in the original data frame.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nage_gaps_heterosexual <- age_gaps_heterosexual |>\n  mutate(\n    older = case_when(\n      character_1_gender == \"woman\" & actor_1_age > actor_2_age ~ \"woman older\",\n      character_2_gender == \"woman\" & actor_2_age > actor_1_age ~ \"woman older\",\n      character_1_gender == \"man\" & actor_1_age > actor_2_age ~ \"man older\",\n      character_2_gender == \"man\" & actor_2_age > actor_1_age ~ \"man older\",\n      actor_1_age == actor_2_age ~ \"same age\"\n    )\n  )\n\nwoman_older <- age_gaps_heterosexual |> filter(older == \"woman older\")\nman_older <- age_gaps_heterosexual |> filter(older == \"man older\")\nsame_age <- age_gaps_heterosexual |> filter(older == \"same age\")\n\n(nrow(woman_older) + nrow(man_older) + nrow(same_age)) ==\n  nrow(age_gaps_heterosexual)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n:::\n\n\n## Export\n\nWrite out the three new datasets you created into the `data`, and within that, into a subfolder called `age-gaps-subsets`, as CSV files.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_csv(woman_older, file = \"data/age-gaps-subsets/woman-older.csv\")\nwrite_csv(man_older, file = \"data/age-gaps-subsets/man-older.csv\")\nwrite_csv(same_age, file = \"data/age-gaps-subsets/same-age.csv\")\n```\n:::\n\n",
    "supporting": [
      "ae-08-age-gaps-import-A_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}