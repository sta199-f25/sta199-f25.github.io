{
  "hash": "9336306faf95cb502aae89c62e313c94",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"AE 14: Chicago taxi classification\"\n---\n\nIn this application exercise, we will\n\n-   Split our data into testing and training\n-   Fit logistic regression regression models to testing data to classify outcomes\n-   Evaluate performance of models on testing data\n\nWe will use **tidyverse** and **tidymodels** for data exploration and modeling,\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\n```\n:::\n\n\nand the `chicago_taxi` dataset introduced in the lecture.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nchicago_taxi <- read_csv(\"data/chicago-taxi.csv\") |>\n  mutate(\n    tip = fct_relevel(tip, \"no\", \"yes\"),\n    local = fct_relevel(local, \"no\", \"yes\"),\n    dow = fct_relevel(dow, \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"),\n    month = fct_relevel(month, \"Jan\", \"Feb\", \"Mar\", \"Apr\")\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 2000 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): tip, company, local, dow, month\ndbl (2): distance, hour\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\nRemember from the lecture that the `chicago_taxi` dataset contains information on whether a trip resulted in a tip (`yes`) or not (`no`) as well as numerical and categorical features of the trip.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(chicago_taxi)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 2,000\nColumns: 7\n$ tip      <fct> no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, n…\n$ distance <dbl> 0.40, 0.96, 1.07, 1.13, 10.81, 3.60, 1.08, 0.85, 17.92, 0.00,…\n$ company  <chr> \"other\", \"Taxicab Insurance Agency Llc\", \"Sun Taxi\", \"other\",…\n$ local    <fct> yes, no, no, no, no, no, yes, no, no, yes, yes, no, no, no, n…\n$ dow      <fct> Fri, Mon, Fri, Sat, Sat, Wed, Wed, Tue, Tue, Sun, Fri, Fri, F…\n$ month    <fct> Mar, Apr, Feb, Feb, Apr, Mar, Mar, Mar, Jan, Apr, Apr, Feb, M…\n$ hour     <dbl> 17, 8, 15, 14, 14, 12, 13, 8, 20, 16, 20, 8, 15, 15, 12, 0, 1…\n```\n\n\n:::\n:::\n\n\n# Spending your data\n\nSplit your data into testing and training in a reproducible manner and display the split object.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\nWhat percent of the original `chicago_taxi` data is allocated to training and what percent to testing?\nCompare your response to your neighbor's.\nAre the percentages roughly consistent?\nWhat determines this in the `initial_split()`?\nHow would the code need to be updated to allocate 80% of the data to training and the remaining 20% to testing?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n75% of the data is allocated to training and the remaining 25% to testing.\nThis is because the `prop` argument in `initial_split()` is `3/4` by default.\nThe code would need to be updated as follows for a 80%/20% split:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# split 80-20\n# add code here\n```\n:::\n\n\nLet's stick with the default split and save our testing and training data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n# Model 1: Custom choice of predictors\n\n## Fit\n\nFit a model for classifying trips as tipped or not based on a subset of predictors of your choice.\nName the model `chicago_taxi_custom_fit` and display a tidy output of the model.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n## Predict\n\nPredict for the testing data using this model.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n## Evaluate\n\nCalculate the false positive and false negative rates for the testing data using this model.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\nAnother commonly used display of this information is a confusion matrix.\nCreate this using the `conf_mat()` function.\nYou will need to review the documentation for the function to determine how to use it.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n## Sensitivity, specificity, ROC curve\n\nCalculate sensitivity and specificity and draw the ROC curve.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n# Model 2: All predictors\n\n## Fit\n\nFit a model for classifying plots as forested or not based on all predictors available.\nName the model `forested_full_fit` and display a tidy output of the model.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n## Predict\n\nPredict for the testing data using this model.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n## Evaluate\n\nCalculate the false positive and false negative rates for the testing data using this model.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n## Sensitivity, specificity, ROC curve\n\nCalculate sensitivity and specificity and draw the ROC curve.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n# Model 1 vs. Model 2\n\nPlot both ROC curves and articulate how you would use them to compare these models. Also calculate the areas under the two curves.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}