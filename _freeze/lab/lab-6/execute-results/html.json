{
  "hash": "7eb4ff68fbf62e149c6c09dab650d757",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Lab 6\nsubtitle: \"#canceled\"\ndescription: \"Due: End of lab on Mon, Nov 17\"\ncategories: Lab\nfilters:\n  - ../remove-fmt-skip.lua\ndraft: false\n---\n\n# Introduction\n\nIn this lab you'll will work with hotel cancellations.\nThe data describe the demand of two different types of hotels.\nEach observation represents a hotel booking between July 1, 2015 and August 31, 2017.\nSome bookings were cancelled (`is_canceled = 1`) and others were kept, i.e., the guests checked into the hotel (`is_canceled = 0`).\nYou can view the code book for all variables [here](https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-02-11/readme.md).\n\n## Getting started\n\nBy now you should be familiar with how to get started with a lab assignment by cloning the GitHub repo for the assignment.\nIf you're not sure how, refer back to an earlier lab.\n\nOpen the *lab-6.qmd* template Quarto file and update the `authors` field to add your name first (first and last) and then your teammates' names (first and last).\nRender the document.\nExamine the rendered document and make sure your and your teammates' names are updated in the document.\nCommit and push your changes with a meaningful commit message and push to GitHub.\n\n<details>\n\n<summary>Click to expand if you need a refresher on assignment guidelines.</summary>\n\n### Code\n\nCode should follow the [tidyverse style](https://style.tidyverse.org/).\nParticularly,\n\n-   there should be spaces before and line breaks after each `+` when building a `ggplot`,\n-   there should also be spaces before and line breaks after each `|>` in a data transformation pipeline,\n-   code should be properly indented,\n-   there should be spaces around `=` signs and spaces after commas.\n\nAdditionally, all code should be visible in the PDF output, i.e., should not run off the page on the PDF.\nLong lines that run off the page should be split across multiple lines with line breaks.[^1]\n\n[^1]: Remember, haikus not novellas when writing code!\n\n### Plots\n\n-   Plots should have an informative title and, if needed, also a subtitle.\n-   Axes and legends should be labeled with both the variable name and its units (if applicable).\n-   Careful consideration should be given to aesthetic choices.\n\n### Workflow\n\nContinuing to develop a sound workflow for reproducible data analysis is important as you complete the lab and other assignments in this course.\n\n-   You should have at least 3 commits with meaningful commit messages by the end of the assignment.\n-   Final versions of both your `.qmd` file and the rendered PDF should be pushed to GitHub.\n\n\n</details>\n\n## Packages\n\nIn this lab we will work with the **tidyverse** package.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\n```\n:::\n\n\n## Data\n\nThe dataset, called `hotels.csv`, can be found in the `data` folder.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhotels <- read_csv(\"data/hotels.csv\")\n```\n:::\n\n\nBelow is an exploratory summary of the variables in the dataset we will use in our analysis.\n\n::: {layout=\"[0.55, -0.05, 0.4]\"}\n\n:::{#firstcol}\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Cancellation status | Number of bookings|\n|:-------------------|------------------:|\n|0 - Not canceled    |              75166|\n|1 - Canceled        |              44224|\n\n\n:::\n:::\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](lab-6_files/figure-html/unnamed-chunk-5-1.png){width=384}\n:::\n:::\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](lab-6_files/figure-html/unnamed-chunk-6-1.png){width=384}\n:::\n:::\n\n\n:::\n\n\n:::{#secondcol}\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n| Number of adults| Number of bookings|\n|----------------:|------------------:|\n|                0|                403|\n|                1|              23027|\n|                2|              89680|\n|                3|               6202|\n|                4|                 62|\n|                5|                  2|\n|                6|                  1|\n|               10|                  1|\n|               20|                  2|\n|               26|                  5|\n|               27|                  2|\n|               40|                  1|\n|               50|                  1|\n|               55|                  1|\n\n\n:::\n:::\n\n\n:::\n\n:::\n\n# Questions\n\n## Part 1 - Data prep\n\n### Question 1\n\na.  One of the outcome variables you'll use is `is_canceled`. Transform this variable to the appropriate data class so that \n    - it uses informative labels (\"not canceled\" and \"canceled\" instead of 0 and 1, respectively), and\n    - the levels are ordered such that when we fit a logistic regression model to predict this outcome, success is defined as \"canceled\" (what we're predicting)\n\n\n\nb.  Based on the exploratory summaries above, you should address a few data quality issues before moving forward with the analysis.\n    To do so, filter the dataset to remove\n    - any bookings with average daily rate greater than $1,000 and\n    - any bookings with number of adults greater than or equal to 5.\n\n\n\nc.  Split the data into a training set (75%) and a testing set (25%), setting the random seed to `1117` for reproducibility.\n\n\n\n## Part 2 - Predicting cancellations\n\n### Question 2\n\nUsing these data, one of our goals is to explore the following question:\n\n> *Are reservations earlier in the month or later in the month more likely to be cancelled?*\n\na.  In a single pipeline, calculate the mean arrival dates (`arrival_date_day_of_month`) for reservations that were cancelled and reservations that were not cancelled.\n\n::: {.callout-tip collapse=\"true\"}\n## Hint\n\nThink carefully about which dataset you should use: `hotels`, the training subset, or the testing subset?\n:::\n\nb.  In your own words, explain why we can not use a linear model to model the relationship between if a hotel reservation was cancelled and the day of month for the booking.\n\nc.  Fit the appropriate model to predict whether a reservation was cancelled from `arrival_date_day_of_month` and display a tidy summary of the model output.\n    Then, interpret the slope coefficient in context of the data and the research question.\n\n::: {.callout-tip collapse=\"true\"}\n## Hint\n\nThe slope interpretation will have the following format:\n\n> The model predicts that, for each day the booking is \\_\\_\\_ (later / earlier) in the month, the \\_\\_\\_ (chance / probability / odds) of a hotel cancellation is \\_\\_\\_ (lower / higher) by a factor of \\_\\_\\_, on average.\n:::\n\nd.  Calculate the probability that the hotel reservation is cancelled if it the arrival date is on the 17th of the month.\n    Based on this probability, would you predict this booking would be cancelled or not cancelled.\n    Explain your reasoning for your classification.\n\n### Question 3\n\na.  Fit another model to predict whether a reservation was cancelled from `arrival_date_day_of_month` and `hotel` type (Resort or City Hotel), allowing the relationship between `arrival_date_day_of_month` and `is_canceled` to vary based on `hotel` type.\n    Display a tidy output of the model.\n\nb.  Interpret the intercept in context of the data.\n\n## Part 3 - Predicting daily rates\n\n### Question 4\n\nThe dataset also contains information about the average daily rate (`adr`) for each reservation.\nThe following model predicts `adr` from `adults` and `hotel` type.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 Ã— 5\n  term              estimate std.error statistic   p.value\n  <chr>                <dbl>     <dbl>     <dbl>     <dbl>\n1 (Intercept)           50.5     0.605      83.5 0        \n2 adults                29.5     0.311      94.9 0        \n3 hotelResort Hotel    -10.7     0.322     -33.1 2.48e-239\n```\n\n\n:::\n:::\n\n\na.  Which of the following is the best interpretation of the slope coefficient for `adults`?\n\n    For each additional adult in the booking, the average daily rate is predicted to be higher by $29.50 \n\n    A. on average, holding hotel type constant.\n\n    B. for Resort Hotels compared to City Hotels, on average.\n    \n    C. for City Hotels compared to Resort Hotels, on average.\n    \n    D. on average, not holding any other variables constant.\n\nb.  Which of the following is the correct interpretation of the slope coefficient for `hotel`?\n\n    A. For each additional Resort Hotel booking, the predicted average daily rate is $10.70 lower, holding number of adults constant.\n    \n    B. For each additional adult in the booking, the average daily rate is predicted to be lower by $10.70 for resort hotels compared to City Hotels, on average.\n    \n    C. Resort Hotels bookings are predicted to have an average daily rate that is $10.70 lower than City Hotels, on average, holding number of adults constant.\n    \n    D. Resort Hotels bookings are predicted to have an average daily rate that is $10.70 higher than City Hotels, on average, holding number of adults constant.\n\nc.  Which of the following is the correct interpretation of the intercept?\n\n    A. The predicted average daily rate for a bookings with 0 adults at a Resort Hotel is $50.50, on average.\n    \n    B. The predicted average daily rate for a bookings with 0 adults at a City Hotel is $50.50, on average.\n    \n    C. For each additional adult and Resort Hotel in the booking, the average daily rate is predicted to be $50.50 higher, on average.\n    \n    D. For each additional adult and City Hotel in the booking, the average daily rate is predicted to be $50.50 higher, on average.\n\nd.  Which of the following (Plot A or Plot B) is the correct visual representation of this model?\n\n\n::: {.cell layout-ncol=\"2\"}\n::: {.cell-output-display}\n![](lab-6_files/figure-html/unnamed-chunk-12-1.png){width=480}\n:::\n\n::: {.cell-output-display}\n![](lab-6_files/figure-html/unnamed-chunk-12-2.png){width=480}\n:::\n:::\n\n\n::: {.callout-tip collapse=\"true\"}\n## Hint\n\nThink about whether you should include only main effects of `adults` and `hotel` or also their interaction effect as well in your model in order to match the plot.\n:::\n\n::: {.callout-note}\n## What next?\n\nIf you were to continue this analysis, you could evaluate the model performance on the testing set.\nYou could also explore including other predictors in the model to see if they improve model performance.\n:::\n\n# Wrap-up\n\n::: callout-warning\nBefore you wrap up the assignment, make sure that you render, commit, and push one final time so that the final versions of both your `.qmd` file and the rendered PDF are pushed to GitHub and your Git pane is empty.\nWe will be checking these to make sure you have been practicing how to commit and push changes.\n:::\n\n## Submission\n\nBy now you should also be familiar with how to submit your assignment in Gradescope.\n\n<details>\n\n<summary>Click to expand if you need a refresher on how to get started with a lab assignment.</summary>\n\nSubmit your PDF document to Gradescope by the end of the lab to be considered \"on time\":\n\n-   Go to <http://www.gradescope.com> and click *Log in* in the top right corner.\n-   Click *School Credentials* $\\rightarrow$ *Duke NetID* and log in using your NetID credentials.\n-   Click on your *STA 199* course.\n-   Click on the assignment, and you'll be prompted to submit it.\n-   Mark all the pages associated with question. All the pages of your lab should be associated with at least one question (i.e., should be \"checked\").\n\n::: callout-important\n## Checklist\n\nMake sure you have:\n\n-   attempted all questions\n-   rendered your Quarto document\n-   committed and pushed everything to your GitHub repository such that the Git pane in RStudio is empty\n-   uploaded your PDF to Gradescope\n:::\n\n\n</details>\n\n## Grading and feedback\n\n-   This lab is worth 30 points:\n    -   10 points for being in lab and turning in *something* -- no partial credit for this part.\n    -   20 points for:\n        -   answering the questions correctly -- there is partial credit for this part.\n        -   following the workflow -- there is partial credit for this part.\n-   The workflow points are for:\n    -   committing at least three times as you work through your lab,\n    -   having your final version of `.qmd` and `.pdf` files in your GitHub repository, and\n    -   overall organization.\n-   You'll receive feedback on your lab on Gradescope within a week.\n\nGood luck, and have fun with it!\n",
    "supporting": [
      "lab-6_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}