<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-b6e6edf6cb1293d7f667c2f39c143ab5.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <meta name="author" content="Dr.&nbsp;Mine √áetinkaya-Rundel">
  <meta name="dcterms.date" content="2025-09-04">
  <title>STA 199 ‚Äì Grammar of data transformation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #767676;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #767676;  padding-left: 4px; }
    div.sourceCode
      { color: #545454; background-color: #fefefe; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #545454; } /* Normal */
    code span.al { color: #7928a1; } /* Alert */
    code span.an { color: #696969; } /* Annotation */
    code span.at { color: #a55a00; } /* Attribute */
    code span.bn { color: #7928a1; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #d91e18; } /* ControlFlow */
    code span.ch { color: #008000; } /* Char */
    code span.cn { color: #d91e18; } /* Constant */
    code span.co { color: #696969; } /* Comment */
    code span.cv { color: #696969; font-style: italic; } /* CommentVar */
    code span.do { color: #696969; font-style: italic; } /* Documentation */
    code span.dt { color: #7928a1; } /* DataType */
    code span.dv { color: #7928a1; } /* DecVal */
    code span.er { color: #7928a1; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #a55a00; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #696969; } /* Information */
    code span.kw { color: #d91e18; } /* Keyword */
    code span.op { color: #00769e; } /* Operator */
    code span.ot { color: #d91e18; } /* Other */
    code span.pp { color: #7928a1; } /* Preprocessor */
    code span.sc { color: #00769e; } /* SpecialChar */
    code span.ss { color: #008000; } /* SpecialString */
    code span.st { color: #008000; } /* String */
    code span.va { color: #a55a00; } /* Variable */
    code span.vs { color: #008000; } /* VerbatimString */
    code span.wa { color: #696969; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-f6ebed985419fc3f34adfbdb6c3e8cf2.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<meta property="og:title" content="Grammar of data transformation ‚Äì STA 199">
<meta property="og:description" content="Lecture 4">
<meta property="og:site_name" content="STA 199">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Grammar of data transformation</h1>
  <p class="subtitle">Lecture 4</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Dr.&nbsp;Mine √áetinkaya-Rundel 
</div>
        <p class="quarto-title-affiliation">
            Duke University <br> STA 199 - Fall 2025
          </p>
    </div>
</div>

  <p class="date">September 4, 2025</p>
</section>
<section>
<section id="warm-up" class="title-slide slide level1 center">
<h1>Warm-up</h1>

</section>
<section id="while-you-wait-participate" class="slide level2 smaller">
<h2>While you wait: Participate üì±üíª</h2>
<div class="columns">
<div class="column" style="width:75%;">
<div class="wooclap">
<p>Which of the following is <strong>true</strong> about the code below?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">ggplot</span>(mtcars, _[blank]<span class="fu">_</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg)) <span class="sc">+</span></span>
<span id="cb1-2"><a></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1-3"><a></a>  <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="small">
<ul>
<li><code>mtcars</code> is the name of the variable being plotted on the x-axis</li>
<li>The function that goes in the blank is <code>map()</code></li>
<li>The data are being visualized with a scatterplot and a smooth line</li>
<li>Some points on the plot will be colored differently than others</li>
</ul>
</div>
</div>
</div><div class="column" style="width:25%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/wooclap-qr.png" class="quarto-figure quarto-figure-center" width="200"></p>
</figure>
</div>
<div class="small">
<p>Scan the QR code or go to <a href="https://app.wooclap.com/sta199">app.wooclap.com/sta199</a>. Log in with your Duke NetID.</p>
</div>
</div></div>
</section>
<section id="announcements" class="slide level2 smaller">
<h2>Announcements</h2>
<ul>
<li><p>Continue to respond to Wooclap questions during class and remember that attendance and participation are part of your grade ‚Äì if we haven‚Äôt gotten any responses from you yet, and you didn‚Äôt just add the class, you‚Äôve already heard from us!</p></li>
<li><p>Following along with code along videos: See https://sta199-f25.github.io/computing-code-alongs.html ‚Äì Clone the <code>code-alongs</code> repository and work throgh the relevant <code>.qmd</code> files as you watch the videos. Use the project navigator in RStudio to switch between your <code>code-alongs</code> project and your other projects (ae, labs, HWs, etc.).</p></li>
<li><p>Lab 1 is on Monday, HW 1 is due next Sunday.</p></li>
</ul>
</section></section>
<section>
<section id="from-last-time" class="title-slide slide level1 center">
<h1>From last time</h1>

</section>
<section id="bechdel-test" class="slide level2 smaller">
<h2>Bechdel test</h2>
<div class="columns">
<div class="column" style="width:70%;">
<p>The <strong>Bechdel test</strong> (or the <strong>Bechdel-Wallace test</strong>), named after cartoonist Alison Bechdel,</p>
<blockquote>
<p>is a measure of the representation of women in film and other fiction. The test asks whether a work features at least two women who have a conversation about something other than a man. Some versions of the test also require that those two women have names.</p>
</blockquote>
</div><div class="column" style="width:30%;">
<p><img data-src="images/04/alison-bechdel.png"></p>
</div></div>

<aside><div>
<p>Source: <a href="https://en.wikipedia.org/wiki/Bechdel_test">Wikipedia</a></p>
</div></aside></section>
<section id="the-origin-of-the-bechdel-test" class="slide level2">
<h2>The origin of the Bechdel test</h2>
<div class="columns">
<div class="column" style="width:70%;">
<p><img data-src="images/04/bechdel-test.png"></p>
<p><em>Dykes to Watch Out For</em> - 1985</p>
</div><div class="column" style="width:30%;">
<p>Film passes if‚Ä¶</p>
<ol type="1">
<li>two female characters;</li>
<li>talk to each other;</li>
<li>about something besides a man.</li>
</ol>
</div></div>
</section>
<section id="how-did-some-of-my-favorite-movies-do" class="slide level2 smaller">
<h2>How did some of my favorite movies do?</h2>
<ul>
<li class="fragment">The Big Lebowski ‚ùå</li>
<li class="fragment">In the Mood for Love ‚úÖ</li>
<li class="fragment">Trainspotting ‚ùå</li>
<li class="fragment">Love Actually ‚úÖ</li>
<li class="fragment">Eternal Sunshine of the Spotless Mind ‚ùå</li>
<li class="fragment">Before Sunrise ‚ùå</li>
<li class="fragment">When Harry Met Sally ‚úÖ</li>
<li class="fragment">Garden State ‚úÖ</li>
<li class="fragment">Empire Records ‚úÖ</li>
<li class="fragment">Am√©lie ‚úÖ</li>
</ul>
</section>
<section id="data-story" class="slide level2 smaller">
<h2>Data story</h2>
<p><img data-src="images/04/bechdel-538.png"></p>
<blockquote>
<p>We did a statistical analysis of films to test two claims: first, that films that pass the Bechdel test ‚Äî featuring women in stronger roles ‚Äî see a lower return on investment, and second, that they see lower gross profits. We found no evidence to support either claim.</p>
</blockquote>

<aside><div>
<p>Source: <a href="https://fivethirtyeight.com/features/the-dollar-and-cents-case-against-hollywoods-exclusion-of-women/">The Dollar-And-Cents Case Against Hollywood‚Äôs Exclusion of Women</a>, by Walt Hickey, FiveThirtyEight, April 1, 2014.</p>
</div></aside></section>
<section id="ae-02-bechdel-dataviz" class="slide level2 smaller">
<h2><code>ae-02-bechdel-dataviz</code></h2>
<div class="appex">
<ul>
<li>Go to your <code>ae</code> project in RStudio.</li>
<li>Make sure all of your changes up to this point are committed and pushed, i.e., there‚Äôs nothing left in your Git pane.</li>
<li>If you haven‚Äôt done so during the last class, click <strong>Pull</strong> to get today‚Äôs application exercise file.</li>
<li>Work through the application exercise in class, and <strong>render, commit, and push</strong> your edits by the end of class.</li>
</ul>
</div>
</section>
<section id="recap" class="slide level2 smaller">
<h2>Recap</h2>
<ul>
<li>Construct plots with <code>ggplot()</code>.</li>
<li>Layers of ggplots are separated by <code>+</code>s.</li>
<li>The formula is (almost) always as follows:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="fu">ggplot</span>(DATA, <span class="fu">aes</span>(<span class="at">x =</span> X<span class="sc">-</span>VAR, <span class="at">y =</span> Y<span class="sc">-</span>VAR, ...)) <span class="sc">+</span></span>
<span id="cb2-2"><a></a>  <span class="fu">geom_XXX</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="recap-code-cells-aka-code-chunks" class="slide level2 smaller">
<h2>Recap: Code cells (aka code chunks)</h2>

<img data-src="images/04/code-cell.png" class="r-stretch"><ul>
<li><p>Cell <code>label</code>s are helpful for describing what the code is doing, for jumping between code cells in the editor, and for troubleshooting</p></li>
<li><p><code>message: false</code> hides any messages emitted by the code in your rendered document</p></li>
</ul>
</section></section>
<section>
<section id="data-transformation" class="title-slide slide level1 center">
<h1>Data transformation</h1>

</section>
<section id="a-quick-reminder" class="slide level2 smaller">
<h2>A quick reminder</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-2"><pre class="sourceCode numberSource r code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-2-1" class="code-annotation-target"><a href="#annotated-cell-2-1"></a>bechdel <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-2-2" class="code-annotation-target"><a href="#annotated-cell-2-2"></a>  <span class="fu">filter</span>(roi <span class="sc">&gt;</span> <span class="dv">400</span>) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-2-3" class="code-annotation-target"><a href="#annotated-cell-2-3"></a>  <span class="fu">select</span>(title, roi, budget_2013, gross_2013, year, clean_test)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="1" data-code-annotation="1">Start with the <code>bechdel</code> data frame</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="2" data-code-annotation="2">Filter for movies with <code>roi</code> greater than 400 (gross is more than 400 times budget)</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="3" data-code-annotation="3">Select the columns <code>title</code>, <code>roi</code>, <code>budget_2013</code>, <code>gross_2013</code>, <code>year</code>, and <code>clean_test</code></span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 6
  title                    roi budget_2013 gross_2013  year clean_test
  &lt;chr&gt;                  &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Paranormal Activity     671.      505595  339424558  2007 dubious   
2 The Blair Witch Proje‚Ä¶  648.      839077  543776715  1999 ok        
3 El Mariachi             583.       11622    6778946  1992 nowomen   </code></pre>
</div>
</div>
</section>
<section id="participate" class="slide level2 smaller">
<h2>Participate üì±üíª</h2>
<div class="columns">
<div class="column" style="width:75%;">
<div class="wooclap">
<p>In data transformation with the pipe operator <code>|&gt;</code>, what does the operator do?</p>
<div class="small">
<ul>
<li>It ends a pipeline and prints the result.</li>
<li>It joins two data frames together.</li>
<li>It passes the output from the previous command into the first argument of the function in the next command.</li>
<li>It is equivalent to the ‚Äúor‚Äù operator.</li>
</ul>
</div>
</div>
</div><div class="column" style="width:25%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/wooclap-qr.png" class="quarto-figure quarto-figure-center" width="200"></p>
</figure>
</div>
<div class="small">
<p>Scan the QR code or go to <a href="https://app.wooclap.com/sta199">app.wooclap.com/sta199</a>. Log in with your Duke NetID.</p>
</div>
</div></div>
</section>
<section id="the-pipe" class="slide level2 smaller">
<h2>The pipe <code>|&gt;</code></h2>
<p>The pipe operator passes what comes before it into the function that comes after it as the first argument in that function.</p>
<div class="columns">
<div class="column fragment" style="width:55%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">sum</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div><div class="column fragment" style="width:45%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="dv">1</span> <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a></a>  <span class="fu">sum</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div></div>
<p><br></p>
<div class="columns">
<div class="column fragment" style="width:55%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a><span class="fu">select</span>(<span class="fu">filter</span>(bechdel, roi <span class="sc">&gt;</span> <span class="dv">400</span>), title)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 1
  title                  
  &lt;chr&gt;                  
1 Paranormal Activity    
2 The Blair Witch Project
3 El Mariachi            </code></pre>
</div>
</div>
</div><div class="column fragment" style="width:45%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>bechdel <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a></a>  <span class="fu">filter</span>(roi <span class="sc">&gt;</span> <span class="dv">400</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a></a>  <span class="fu">select</span>(title)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 1
  title                  
  &lt;chr&gt;                  
1 Paranormal Activity    
2 The Blair Witch Project
3 El Mariachi            </code></pre>
</div>
</div>
</div></div>
</section>
<section id="code-style-tip" class="slide level2 smaller">
<h2>Code style tip <i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i></h2>
<ul>
<li>In data transformation pipelines, always use a
<ul>
<li>space before <code>|&gt;</code></li>
<li>line break after <code>|&gt;</code></li>
<li>indent the next line of code</li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li>In data visualization layers, always use a
<ul>
<li>space before <code>+</code></li>
<li>line break after <code>+</code></li>
<li>indent the next line of code</li>
</ul></li>
</ul>
</div>
</section>
<section id="the-pipe-in-action" class="slide level2 smaller">
<h2>The pipe, in action</h2>
<div class="task">
<p>Find movies that pass the Bechdel test and display their titles and ROIs in descending order of ROI.</p>
</div>
<div class="fragment">
<p>Start with the <code>bechdel</code> data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>bechdel</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,615 √ó 7
   title          year gross_2013 budget_2013    roi binary clean_test
   &lt;chr&gt;         &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
 1 21 &amp; Over      2013   67878146    13000000  5.22  FAIL   notalk    
 2 Dredd 3D       2012   55078343    45658735  1.21  PASS   ok        
 3 12 Years a S‚Ä¶  2013  211714070    20000000 10.6   FAIL   notalk    
 4 2 Guns         2013  208105475    61000000  3.41  FAIL   notalk    
 5 42             2013  190040426    40000000  4.75  FAIL   men       
 6 47 Ronin       2013  184166317   225000000  0.819 FAIL   men       
 7 A Good Day t‚Ä¶  2013  371598396    92000000  4.04  FAIL   notalk    
 8 About Time     2013  102648667    12000000  8.55  PASS   ok        
 9 Admission      2013   36014634    13000000  2.77  PASS   ok        
10 After Earth    2013  304895295   130000000  2.35  FAIL   notalk    
# ‚Ñπ 1,605 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="the-pipe-in-action-1" class="slide level2 smaller">
<h2>The pipe, in action</h2>
<div class="task">
<p>Find movies that pass the Bechdel test and display their titles and ROIs in descending order of ROI.</p>
</div>
<p>Filter for rows where <code>binary</code> is equal to <code>"PASS"</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>bechdel <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a></a>  <span class="fu">filter</span>(binary <span class="sc">==</span> <span class="st">"PASS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 753 √ó 7
   title           year gross_2013 budget_2013   roi binary clean_test
   &lt;chr&gt;          &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
 1 Dredd 3D        2012   55078343    45658735  1.21 PASS   ok        
 2 About Time      2013  102648667    12000000  8.55 PASS   ok        
 3 Admission       2013   36014634    13000000  2.77 PASS   ok        
 4 American Hust‚Ä¶  2013  397915817    40000000  9.95 PASS   ok        
 5 August: Osage‚Ä¶  2013   87609748    25000000  3.50 PASS   ok        
 6 Beautiful Cre‚Ä¶  2013   75392809    50000000  1.51 PASS   ok        
 7 Blue Jasmine    2013  101793664    18000000  5.66 PASS   ok        
 8 Carrie          2013  120268278    30000000  4.01 PASS   ok        
 9 Despicable Me‚Ä¶  2013 1338831390    76000000 17.6  PASS   ok        
10 Elysium         2013  379242208   120000000  3.16 PASS   ok        
# ‚Ñπ 743 more rows</code></pre>
</div>
</div>
</section>
<section id="the-pipe-in-action-2" class="slide level2 smaller">
<h2>The pipe, in action</h2>
<div class="task">
<p>Find movies that pass the Bechdel test and display their titles and ROIs in descending order of ROI.</p>
</div>
<p>Arrange the rows in <code>desc</code>ending order of <code>roi</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a>bechdel <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a></a>  <span class="fu">filter</span>(binary <span class="sc">==</span> <span class="st">"PASS"</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(roi))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 753 √ó 7
   title           year gross_2013 budget_2013   roi binary clean_test
   &lt;chr&gt;          &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
 1 The Blair Wit‚Ä¶  1999  543776715      839077 648.  PASS   ok        
 2 The Devil Ins‚Ä¶  2012  157289709     1014639 155.  PASS   ok        
 3 My Big Fat Gr‚Ä¶  2002  768922942     6475896 119.  PASS   ok        
 4 Chasing Amy     1997   39417963      362810 109.  PASS   ok        
 5 Slacker         1991    4200140       39349 107.  PASS   ok        
 6 Insidious       2010  164379554     1602348 103.  PASS   ok        
 7 Paranormal Ac‚Ä¶  2010  280159759     3204696  87.4 PASS   ok        
 8 Paranormal Ac‚Ä¶  2011  322170936     5178454  62.2 PASS   ok        
 9 The Last Exor‚Ä¶  2010  118787648     1922817  61.8 PASS   ok        
10 Cinderella      1997  246710482     4208591  58.6 PASS   ok        
# ‚Ñπ 743 more rows</code></pre>
</div>
</div>
</section>
<section id="the-pipe-in-action-3" class="slide level2 smaller">
<h2>The pipe, in action</h2>
<div class="task">
<p>Find movies that pass the Bechdel test and display their titles and ROIs in descending order of ROI.</p>
</div>
<p>Select columns <code>title</code> and <code>roi</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a>bechdel <span class="sc">|&gt;</span></span>
<span id="cb18-2"><a></a>  <span class="fu">filter</span>(binary <span class="sc">==</span> <span class="st">"PASS"</span>) <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(roi)) <span class="sc">|&gt;</span></span>
<span id="cb18-4"><a></a>  <span class="fu">select</span>(title, roi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 753 √ó 2
   title                      roi
   &lt;chr&gt;                    &lt;dbl&gt;
 1 The Blair Witch Project  648. 
 2 The Devil Inside         155. 
 3 My Big Fat Greek Wedding 119. 
 4 Chasing Amy              109. 
 5 Slacker                  107. 
 6 Insidious                103. 
 7 Paranormal Activity 2     87.4
 8 Paranormal Activity 3     62.2
 9 The Last Exorcism         61.8
10 Cinderella                58.6
# ‚Ñπ 743 more rows</code></pre>
</div>
</div>
</section>
<section id="in-this-class-you-will" class="slide level2 smaller">
<h2>In this class, you will‚Ä¶</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Build cakes (<code>ggplot</code>) <img data-src="images/04/cake.png"></p>
</div><div class="column" style="width:50%;">
<p>Stack dolls (pipe <code>|&gt;</code>) <img data-src="images/04/matryoshka.png"></p>
</div></div>
<p>Master these constructs, and everything will be A-Ok!</p>

<aside><div>
<p>Source: <a href="https://unsplash.com/photos/white-pink-and-yellow-cake-GQvNc4bDRYw">Cake by Anirban Sengupta on Unsplash</a> and <a href="https://unsplash.com/photos/a-group-of-russian-nesting-dolls-sitting-on-a-table-YmULswIbc3I">Matryoshka dolls by Julia Kadel on Unsplash</a>.</p>
</div></aside></section></section>
<section>
<section id="looking-forward-describing-distributions-and-relationships" class="title-slide slide level1 center">
<h1>Looking forward: Describing distributions and relationships</h1>

</section>
<section id="participate-1" class="slide level2 smaller">
<h2>Participate üì±üíª</h2>
<div class="columns">
<div class="column" style="width:75%;">
<div class="wooclap">
<p>Which type of visualization is useful for comparing distributions across groups?</p>
<ul>
<li>Histogram</li>
<li>Line plot</li>
<li>Scatterplot</li>
<li>Side-by-side boxplots</li>
</ul>
</div>
</div><div class="column" style="width:25%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/wooclap-qr.png" class="quarto-figure quarto-figure-center" width="200"></p>
</figure>
</div>
<div class="small">
<p>Scan the QR code or go to <a href="https://app.wooclap.com/sta199">app.wooclap.com/sta199</a>. Log in with your Duke NetID.</p>
</div>
</div></div>
</section>
<section id="one-numerical-variable" class="slide level2 smaller">
<h2>One numerical variable</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="04-grammar-of-data-transformation_files/figure-revealjs/unnamed-chunk-12-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="04-grammar-of-data-transformation_files/figure-revealjs/unnamed-chunk-13-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
<ul>
<li><strong>Center</strong>: What is the ‚Äútypical‚Äù value (mean, median, mode) the data are concentrating around?</li>
<li><strong>Spread</strong>: How concentrated are the data around a typical value?</li>
<li><strong>Shape</strong>: Does the distribution have one peak, or many? is it symmetric or skewed?</li>
</ul>
</section>
<section id="shape-vs.-center" class="slide level2">
<h2>Shape vs.&nbsp;center</h2>

<img data-src="images/04/mean-median-mode.png" class="r-stretch"></section>
<section id="histograms-provide-more-detail" class="slide level2">
<h2>Histograms provide more detail‚Ä¶</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="04-grammar-of-data-transformation_files/figure-revealjs/unnamed-chunk-14-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="04-grammar-of-data-transformation_files/figure-revealjs/unnamed-chunk-15-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="but-boxplots-are-nice-for-side-by-side-comparisons" class="slide level2">
<h2>‚Ä¶but boxplots are nice for side-by-side comparisons</h2>

<img data-src="04-grammar-of-data-transformation_files/figure-revealjs/unnamed-chunk-16-1.png" width="960" class="r-stretch"></section>
<section id="talking-about-two-numerical-variables" class="slide level2">
<h2>Talking about two numerical variables</h2>

<img data-src="04-grammar-of-data-transformation_files/figure-revealjs/unnamed-chunk-17-1.png" width="864" class="r-stretch"><ul>
<li><strong>Direction</strong>: Positive or negative</li>
<li><strong>Shape</strong>: Linear or nonlinear</li>
<li><strong>Strength</strong>: How close are points to the ‚Äútrend‚Äù</li>
</ul>
</section>
<section id="strength-and-direction-of-linear-relationships" class="slide level2">
<h2>Strength and direction of linear relationships</h2>

<img data-src="images/04/corr.png" class="r-stretch"></section>
<section id="nonlinear-relationships" class="slide level2">
<h2>Nonlinear relationships</h2>



<img data-src="images/04/un-data-viz.png" class="r-stretch"></section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="images/logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://sta199-f25.github.io/">üîó sta199-f25.github.io</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/sta199-f25\.github\.io\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>